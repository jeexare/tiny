document.addEventListener("DOMContentLoaded",function(){loadLast();loadCats();loadGuidebook();loadChrs();loadRp()});function loadLast(){const foroLastElements=document.querySelectorAll(".foro-last");for(let i=0;i<foroLastElements.length;i++){const parentDiv=foroLastElements[i];const dateTimeSpan=parentDiv.querySelector("span");if(dateTimeSpan.textContent!==""){const dateTimeText=dateTimeSpan.childNodes[0].textContent.trim();const adminAnchor=parentDiv.querySelector("a.gensmall");const adminSpand=parentDiv.querySelector(".color-groups");let adminLink="";if(adminAnchor)adminLink=adminAnchor.outerHTML;else if(adminSpand)adminLink=adminSpand.outerHTML;const lastPostAnchor=parentDiv.querySelector("a.last-post-icon");lastPostAnchor.innerHTML='<i class="fas fa-chevron-right"></i>';const adminSpan=document.createElement("span");adminSpan.innerHTML="Por "+adminLink;const dateSpan=document.createElement("span");dateSpan.innerHTML=dateTimeText+" "+lastPostAnchor.outerHTML;parentDiv.removeChild(dateTimeSpan);parentDiv.appendChild(adminSpan);parentDiv.appendChild(dateSpan)}}}function loadCats(){var allCategories=document.querySelectorAll(".forabg");if(allCategories){for(var x=0;x<allCategories.length;x++){var category=allCategories[x];if(category){var categoryHead=category.querySelector(".cat-head");var categorySpan=categoryHead.querySelector("span");var categoryNumber=(x+1).toString().padStart(2,"0");categorySpan.textContent=categoryNumber;console.log(category)}}}}function loadGuidebook(){var firstCat=document.querySelector("#c1.forabg");if(!firstCat)return;var gguidebook=document.querySelector(".gg-uidebook");if(!gguidebook)return;var listForos=firstCat.querySelector("ul.topiclist.forums");if(!listForos)return;firstCat.appendChild(gguidebook);firstCat.appendChild(listForos);console.log("Guidebook cargado!")}function loadChrs(){const forabgCharac=document.querySelector("#c2.forabg");if(!forabgCharac)return;const foroReg=forabgCharac.querySelector(".foro-reg");if(!foroReg)return;foroReg.classList.add("ffichas");reorderFichas();console.log("Zona de personajes cargada!")}function loadRp(){const scenesCat=document.querySelector("#c4");if(scenesCat){const topicList=scenesCat.querySelector(".topiclist.forums");if(topicList){const buttonsDiv=document.createElement("div");buttonsDiv.classList.add("scenes-list");const foroRegElements=topicList.querySelectorAll(".foro-reg");foroRegElements.forEach((foroRegElement,index)=>{const foroTit=foroRegElement.querySelector(".foro-tit");const foroTitName=foroTit.textContent;const foroTitHref=foroTit.getAttribute("href");const newButton=document.createElement("a");newButton.classList.add("scene-button");newButton.textContent=foroTitName;newButton.setAttribute("href",foroTitHref);newButton.setAttribute("data-name",foroTitName);const foroStats=foroRegElement.querySelector(".foro-stats");if(foroStats){newButton.appendChild(foroStats)}buttonsDiv.appendChild(newButton);foroRegElement.setAttribute("data-name",foroTitName);if(index===0){newButton.setAttribute("id","onscene")}const sceneInfo=document.createElement("div");sceneInfo.classList.add("scene-info");const foroMain=foroRegElement.querySelector(".foro-main");const foroSide=foroRegElement.querySelector(".foro-side");const foroFondo=foroMain.querySelector(".foro-fondo");if(foroFondo){foroMain.removeChild(foroFondo);foroRegElement.appendChild(foroFondo)}sceneInfo.appendChild(foroMain);sceneInfo.appendChild(foroSide);foroRegElement.appendChild(sceneInfo)});topicList.appendChild(buttonsDiv);const mainScene=document.createElement("div");mainScene.classList.add("main-scene");foroRegElements.forEach((foroRegElement)=>{mainScene.appendChild(foroRegElement)});topicList.appendChild(mainScene);setupClickEvent()}}}function reorderFichas(){const subforoFichas=document.querySelector(".foro-reg.ffichas");const descFichas=subforoFichas.querySelector(".foro-main2");const gruposFichas=subforoFichas.querySelector(".foro-gruposs");const sideContent=subforoFichas.querySelector(".foro-side");const mainSection=subforoFichas.querySelector(".foro-main");subforoFichas.appendChild(descFichas);subforoFichas.appendChild(gruposFichas);subforoFichas.appendChild(sideContent);subforoFichas.appendChild(mainSection)}function setupClickEvent(){const onsceneButton=document.getElementById("onscene");if(onsceneButton){const sceneName=onsceneButton.getAttribute("data-name");const scene=document.querySelector(`.foro-reg[data-name="${sceneName}"]`);if(scene){onsceneButton.classList.add("active");scene.classList.add("active")}}document.addEventListener("mouseover",(e)=>{const sceneButton=e.target.closest(".scene-button");if(!sceneButton)return;const sceneName=sceneButton.getAttribute("data-name");if(!sceneName)return;const scene=document.querySelector(`.foro-reg[data-name="${sceneName}"]`);if(!scene)return;const activeScene=document.querySelector(`.scene-button[data-name="${sceneName}"]`);if(!activeScene)return;document.querySelectorAll(".foro-reg").forEach((scene)=>scene.classList.remove("active"));scene.classList.add("active");document.querySelectorAll(".scene-button").forEach((activeScene)=>activeScene.classList.remove("active"));activeScene.classList.add("active")})}